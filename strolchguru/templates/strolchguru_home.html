<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>strolch.guru</title>
</head>
<body style="background: black;">
<video id="clip" autoplay width="100%" height="100%" style="position: absolute; z-index: 8; top: 0px; left: 0px; width: 100%;" onended="play_random_clip()">
</video>
<script>
    clips = [
            {% for clip in clips %}
            "{{ clip }}",
            {% endfor %}
        ]

    function play_random_clip() {
        const clip = clips[Math.floor(Math.random() * clips.length)];
        const video = document.querySelector("#clip");
        video.setAttribute("src", clip);
    }

    play_random_clip()

    var httpRequest = new XMLHttpRequest()
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState == 4  ) {
            var jsonObj = JSON.parse(httpRequest.responseText);
            clips = jsonObj;
        }
    }

    httpRequest.open("GET", "{% url url_name %}", true);
    httpRequest.send();
</script>
</body>
</html>
