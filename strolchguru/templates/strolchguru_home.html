<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>strolch.guru</title>
</head>
<body style="background: black;">

<video id="clip" autoplay width="100%" height="100%"
       style="position: absolute; z-index: 8; top: 0px; left: 0px; width: 100%;" onended="play_random_clip()">
</video>
<div style="color:white; text-shadow: 2px 0 0 #000, -2px 0 0 #000, 0 2px 0 #000, 0 -2px 0 #000, 1px 1px #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000; z-index: 10; position: absolute; bottom: 10px; left:10px; font-family: 'Comic Sans MS'; pointer-events: none">
    <h1 id="clip_title" style="margin-bottom: 0; "></h1>
    <p id="clipper" style="margin: 0; font-size: x-large"></p>
</div>
<script>
    clips = [
        {% for clip in clips %}
            {{ clip | safe }},
        {% endfor %}
    ]

    function play_random_clip() {
        const clip = clips[Math.floor(Math.random() * clips.length)];
        document.querySelector("#clip").setAttribute("src", clip["clip_url"]);
        document.querySelector("#clip_title").innerHTML = clip["title"];
        document.querySelector("#clipper").innerHTML = "von " + clip["creator_name"];
    }

    play_random_clip()

    var httpRequest = new XMLHttpRequest()
    httpRequest.onreadystatechange = function () {
        if (httpRequest.readyState == 4) {
            var jsonObj = JSON.parse(httpRequest.responseText);
            clips = jsonObj;
        }
    }

    httpRequest.open("GET", "{% url url_name %}", true);
    httpRequest.send();
</script>
</body>
</html>
